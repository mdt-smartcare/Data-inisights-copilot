# Table inclusion and exclusion rules
tables:
  # Global column exclusions (applied to all tables)
  global_exclude_columns:
    - "first_name"
    - "last_name"
    - "phone_number"
    - "date_of_birth"
    - "qr_code"
    - "mother_name"
    - "father_name"
    - "mother_occupation"
    - "father_occupation"
    - "mother_educational_qualification"
    - "father_educational_qualification"
    - "password"
    - "username"

  # Exclude entire tables (no medical/clinical value)
  exclude_tables:
    - "audit"                               # System audit logs
    - "awsdms_ddl_audit"                    # AWS DMS migration logs
    - "deleted_site_program"                # Soft-deleted records
    - "duplicate_profile"                   # Data quality/deduplication
    - "email_template"                      # Email templates (static)
    - "flyway_schema_history"               # Database migration history
    - "form_meta_ui"                        # UI metadata
    - "offline_log"                         # Offline sync logs
    - "outbound_email"                      # Email delivery logs
    - "outbound_sms"                        # SMS delivery logs
    - "screening_log"                       # Screening process logs
    - "shedlock"                            # Distributed lock management
    - "site_report_log"                     # Report generation logs
    - "sms_template"                        # SMS templates (static)
    - "sms_template_values"                 # SMS template variables
    - "updated_duplicate_patient_profile"   # Data quality fixes
    - "user_token"                          # Auth tokens (security risk)

  # Table-specific column exclusions (overrides global)
  table_specific_exclusions:
    patient:
      - "first_name"
      - "last_name"
      - "phone_number"
      - "date_of_birth"
      - "qr_code"
      - "mother_name"
      - "father_name"
      - "mother_occupation"
      - "father_occupation"
      - "mother_educational_qualification"
      - "father_educational_qualification"
    patient_tracker:
      - "first_name"
      - "last_name"
      - "phone_number"
      - "date_of_birth"
      - "qr_code"
    call_register:
      - "first_name"
      - "last_name"
      - "phone_number"
    user:
      - "first_name"
      - "last_name"
      - "phone_number"
      - "password"
      - "username"

# Embedding configuration
embedding:
  model_name: "BAAI/bge-m3"
  model_path: "./models/bge-m3"
  batch_size: 128

# Advanced Chunking Configuration for Small-to-Big Retrieval
chunking:
  parent_splitter:
    chunk_size: 800       # Reduced from 1000 - better for structured medical data
    chunk_overlap: 150    # Reduced proportionally
  child_splitter:
    chunk_size: 200       # Reduced from 250 - captures single medical concepts better
    chunk_overlap: 50     # Increased from 30 - ensures key medical terms aren't split

# Vector store configuration
vector_store:
  type: "chroma"
  chroma_path: "./data/indexes/chroma_db_advanced"
  collection_name: "spice_healthcare_advanced"

# Advanced Retriever Configuration
retriever:
  # Weights for combining dense (vector) and sparse (keyword) search
  hybrid_search_weights: [0.75, 0.25] # Increased semantic weight - medical concepts are semantic
  # Number of initial documents to fetch before reranking
  top_k_initial: 50      # Increased from 20 - cast wider net for medical data
  # Number of final documents to return after reranking
  top_k_final: 10        # Increased from 5 - provide richer context to LLM
  # Model for the final reranking step
  reranker_model_name: "BAAI/bge-reranker-base"

# Text processing
text_processing:
  chunk_size: 1000
  chunk_overlap: 200
  min_chunk_length: 50

